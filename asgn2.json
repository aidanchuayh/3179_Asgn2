{
  "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
  "vconcat": [
    {
      "width": 800,
      "height": 450,
      "title": "Total Passenger Volume Across Australian Airports",
      "projection": {"type": "equalEarth"},
      "transform": [
        {"filter": "datum.Year == 2023"}
      ],
      "layer": [
        {
          "data": {
            "url": "https://raw.githubusercontent.com/aidanchuayh/3179_Asgn2/refs/heads/main/au-states.topojson",
            "format": {"type": "topojson", "feature": "austates"}
          },
          "mark": {"type": "geoshape", "fill": "lightgray", "stroke": "black"}
        },
        {
          "data": {
            "url": "https://raw.githubusercontent.com/aidanchuayh/3179_Asgn2/main/australia-airports-coor-cleaned.csv"
          },
          "transform": [
            {"filter": "datum.Year == 2023"},
            {"filter": "isValid(datum.Pax_Total)"}
          ],
          "mark": "circle",
          "encoding": {
            "longitude": {"field": "Longitude", "type": "quantitative"},
            "latitude": {"field": "Latitude", "type": "quantitative"},
            "size": {"field": "Pax_Total", "type": "quantitative", "scale": {"domain": [0, 4000000]}},
            "color": {"field": "Pax_Total", "type": "quantitative", "scale": {"scheme": "oranges"}},
            "tooltip": [
              {"field": "AIRPORT", "type": "nominal"},
              {"field": "Year", "type": "quantitative"},
              {"field": "Pax_Total", "type": "quantitative"}
            ]
          }
        }
      ]
    },
    {
      "data": {
        "url": "https://raw.githubusercontent.com/aidanchuayh/3179_Asgn2/main/australia-airports-coor-cleaned.csv",
        "format": {"type": "csv"}
      },
      "title": "Monthly Domestic and International Travellers by Airport per Year",
      "transform": [
        {"filter": "datum.AIRPORT == 'MELBOURNE'"}
      ],
      "width": 800,
      "height": 500,
      "mark": "rect",
      "encoding": {
        "x": {
          "field": "Month",
          "type": "ordinal",
          "title": "Month",
          "axis": {"labelAngle": 0}
        },
        "y": {
          "field": "Year",
          "type": "ordinal",
          "title": "Year"
        },
        "color": {
          "field": "Pax_Total",
          "aggregate": "sum",
          "type": "quantitative",
          "scale": {
            "scheme": "oranges",
            "domain": [0, 4000000]
          },
          "legend": {
            "title": "Total Pax"
          }
        }
      }
    },
    {
      "data": {
        "url": "https://raw.githubusercontent.com/aidanchuayh/3179_Asgn2/main/australia-airports-coor-cleaned.csv",
        "format": {"type": "csv"}
      },
      "title": "Radial Plot: Passenger Volume by Month for Selected Airport",
      "transform": [
        {"filter": "datum.Year == 2023"},
        {"filter": "datum.AIRPORT == 'MELBOURNE'"}
      ],
      "width": 400,
      "height": 400,
      "layer": [
        {
          "mark": {"type": "arc", "innerRadius": 100, "stroke": "#fff"},
          "encoding": {
            "theta": {
              "field": "Pax_Total", 
              "type": "quantitative", 
              "stack": true, 
              "sort": {
                "field": "Month",
                "order": "ascending"
              }
            },
            "radius": {"field": "Pax_Total", "type": "quantitative", "scale": {"type": "sqrt", "zero": true, "rangeMin": 20, "rangeMax": 200}},
            "color": {"field": "Month", "type": "ordinal", "scale": {"range": ["#ffeda0", "#feb24c", "#f03b20"]}, "title": "Month"},
            "tooltip": [
              {"field": "Month", "type": "ordinal", "title": "Month"},
              {"field": "Pax_Total", "type": "quantitative", "title": "Total Passengers"}
            ]
          }
        },
        {
          "mark": {"type": "text", "radiusOffset": 30, "align": "center", "baseline": "middle"},
          "encoding": {
            "theta": {
              "field": "Pax_Total", 
              "type": "quantitative", 
              "stack": true,
              "sort": {
                "field": "Month",
                "order": "ascending"
              }
            },
            "radius": {"field": "Pax_Total", "type": "quantitative", "scale": {"type": "sqrt", "zero": true, "rangeMin": 20, "rangeMax": 200}},
            "color": {"field": "Month", "type": "ordinal", "legend": null},
            "text": {"field": "Pax_Total", "type": "quantitative"}
          }
        }
      ]
    }
  ]
}
